<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Secure Sign In | Dev Core</title>
  <!-- Fonts & Styles -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,500;14..32,600;14..32,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/app.css}" href="/css/app.css">
</head>
<body class="h-screen overflow-hidden bg-slate-50 text-slate-900 antialiased font-inter">

  <!-- Subtle background with gradient and pattern -->
  <div class="absolute inset-0 -z-10 bg-gradient-to-br from-slate-100 to-slate-200/60">
    <div class="absolute inset-0 grid-pattern opacity-30"></div>
    <!-- Gentle floating shapes (very faint) -->
    <div class="absolute -top-20 -right-20 h-80 w-80 rounded-full bg-blue-200/20 blur-3xl float-gentle"></div>
    <div class="absolute top-40 -left-20 h-96 w-96 rounded-full bg-indigo-200/20 blur-3xl float-gentle"></div>
    <div class="absolute bottom-10 right-10 h-72 w-72 rounded-full bg-slate-300/20 blur-3xl float-gentle"></div>
  </div>

  <div class="h-screen flex items-center justify-center px-4 py-8">
    <div class="w-full max-w-6xl bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-slate-200/80 overflow-hidden animate-fade-up">

      <div class="grid grid-cols-1 lg:grid-cols-2 min-h-[600px]">

        <!-- Left panel – Brand & enterprise value props -->
        <div class="bg-slate-900 p-10 text-white flex flex-col justify-between relative overflow-hidden">
          <!-- subtle pattern inside dark panel -->
          <div class="absolute inset-0 opacity-5" style="background-image: radial-gradient(circle at 2px 2px, white 1px, transparent 0); background-size: 24px 24px;"></div>
          
          <div>
            <div class="flex items-center gap-2 mb-8">
              <div class="h-10 w-10 rounded-xl bg-white/10 backdrop-blur-sm flex items-center justify-center">
                <svg class="h-6 w-6 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 11V7a4 4 0 0 0-8 0v4"/>
                  <path d="M6 11h12v10H6V11z"/>
                  <path d="M10 16h4"/>
                </svg>
              </div>
              <span class="text-xl font-semibold tracking-tight">Dev<span class="text-blue-300">Core</span></span>
            </div>

            <h1 class="text-3xl font-bold tracking-tight mb-4">Enterprise‑grade point of sale</h1>
            <p class="text-slate-300 text-sm leading-relaxed max-w-md">
              Secure, scalable, and compliant with enterprise security standards. 
              Role‑based access, audit logs, and real‑time inventory across all locations.
            </p>

            <div class="mt-8 space-y-4">
              <div class="flex gap-3">
                <div class="h-6 w-6 rounded-full bg-blue-500/20 flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="h-3 w-3 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path d="M20 6L9 17l-5-5" stroke-width="3"/>
                  </svg>
                </div>
                <div>
                  <div class="font-medium text-white">SOC2 Type II compliant</div>
                  <div class="text-xs text-slate-400">Your data is encrypted and monitored 24/7</div>
                </div>
              </div>
              <div class="flex gap-3">
                <div class="h-6 w-6 rounded-full bg-blue-500/20 flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="h-3 w-3 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path d="M20 6L9 17l-5-5" stroke-width="3"/>
                  </svg>
                </div>
                <div>
                  <div class="font-medium text-white">Multi‑factor authentication (MFA)</div>
                  <div class="text-xs text-slate-400">Enforce MFA for admin and manager roles</div>
                </div>
              </div>
              <div class="flex gap-3">
                <div class="h-6 w-6 rounded-full bg-blue-500/20 flex items-center justify-center flex-shrink-0 mt-0.5">
                  <svg class="h-3 w-3 text-blue-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path d="M20 6L9 17l-5-5" stroke-width="3"/>
                  </svg>
                </div>
                <div>
                  <div class="font-medium text-white">Unlimited audit trail</div>
                  <div class="text-xs text-slate-400">Track every login, role change, and transaction</div>
                </div>
              </div>
            </div>
          </div>

          <div class="text-xs text-slate-400 mt-8">
            © <span th:text="${#dates.format(#dates.createNow(),'yyyy')}">2026</span> Dev Core. All rights reserved.
            <br><a th:href="@{/legal/privacy}" href="/legal/privacy" class="underline underline-offset-2 hover:text-white">Privacy Policy</a> ·
            <a th:href="@{/legal/terms}" href="/legal/terms" class="underline underline-offset-2 hover:text-white">Terms</a>
          </div>
        </div>

        <!-- Right panel – Login form -->
        <div class="p-10 bg-white flex flex-col justify-center">
          <div class="max-w-sm mx-auto w-full">

            <div class="mb-8">
              <h2 class="text-2xl font-bold text-slate-800">Secure sign‑in</h2>
              <p class="text-sm text-slate-500 mt-1">Use your corporate credentials</p>
            </div>

            <!-- Messages -->
            <div th:if="${param.error}" class="mb-6 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700">
              <span class="font-semibold">Authentication failed</span> – Invalid username or password.
            </div>
            <div th:if="${param.logout}" class="mb-6 rounded-lg border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700">
              <span class="font-semibold">Signed out</span> – You have been logged out successfully.
            </div>
            <div th:if="${param.resetRequested}" class="mb-6 rounded-lg border border-blue-200 bg-blue-50 px-4 py-3 text-sm text-blue-700">
              <span class="font-semibold">Password help requested</span> – If the account exists, your administrator has been notified.
            </div>
            <div th:if="${param.ssoUnavailable}" class="mb-6 rounded-lg border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700">
              <span class="font-semibold">SSO unavailable</span> – Corporate SSO is not configured for this environment.
            </div>

            <form method="post" action="/login" class="space-y-5">
              <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

              <!-- Username -->
              <div>
                <label class="block text-xs font-semibold text-slate-600 uppercase tracking-wider mb-1.5">Username</label>
                <div class="relative">
                  <span class="absolute inset-y-0 left-3 flex items-center text-slate-400">
                    <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                  </span>
                  <input name="username" type="text" autocomplete="username" placeholder="e.g., john.doe"
                         class="w-full h-12 pl-10 pr-4 rounded-lg border border-slate-300 bg-slate-50/50
                                focus:bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-200
                                transition text-sm"/>
                </div>
              </div>

              <!-- Password -->
              <div>
                <label class="block text-xs font-semibold text-slate-600 uppercase tracking-wider mb-1.5">Password</label>
                <div class="relative">
                  <span class="absolute inset-y-0 left-3 flex items-center text-slate-400">
                    <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path d="M12 11V7a4 4 0 0 0-8 0v4M6 11h12v10H6V11z" />
                    </svg>
                  </span>
                  <input id="password" name="password" type="password" autocomplete="current-password"
                         class="w-full h-12 pl-10 pr-12 rounded-lg border border-slate-300 bg-slate-50/50
                                focus:bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-200
                                transition text-sm"
                         placeholder="········"/>
                  <button type="button" onclick="togglePassword()" aria-label="Toggle password visibility"
                          class="absolute inset-y-0 right-3 flex items-center text-slate-400 hover:text-slate-600 transition">
                    <svg id="eyeOpen" class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                      <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8S1 12 1 12z"/>
                      <circle cx="12" cy="12" r="3"/>
                    </svg>
                    <svg id="eyeClosed" class="h-5 w-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                      <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.46 18.46 0 0 1 5.06-6.94"/>
                      <path d="M1 1l22 22"/>
                    </svg>
                  </button>
                </div>
              </div>

              <!-- Options row -->
              <div class="flex items-center justify-between text-sm">
                <label class="flex items-center gap-2 cursor-pointer">
                  <input type="checkbox" name="remember-me" class="h-4 w-4 rounded border-slate-300 text-blue-600 focus:ring-blue-300">
                  <span class="text-slate-600">Stay signed in</span>
                </label>
                <a th:href="@{/login/forgot-password}" href="/login/forgot-password"
                   class="font-medium text-blue-700 hover:text-blue-800 text-sm">Forgot password?</a>
              </div>

              <!-- Submit -->
              <button type="submit"
                class="w-full btn-enterprise h-12 rounded-lg text-white text-sm font-semibold tracking-wide
                       focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                Sign in to dashboard
              </button>

              <!-- Enterprise SSO hint (optional) -->
              <div class="relative my-6">
                <div class="absolute inset-0 flex items-center">
                  <div class="w-full border-t border-slate-200"></div>
                </div>
                <div class="relative flex justify-center text-xs">
                  <span class="px-2 bg-white text-slate-400">Enterprise single sign‑on available</span>
                </div>
              </div>

              <!-- SSO action -->
              <a th:href="@{/login/sso}" href="/login/sso"
                 class="w-full py-2 border border-slate-300 rounded-lg text-slate-700 text-sm font-medium
                        hover:bg-slate-50 transition flex items-center justify-center gap-2">
                <svg class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                </svg>
                Sign in with corporate SSO
              </a>
            </form>

            <div class="mt-6 text-xs text-center text-slate-400">
              Need help? <a th:href="@{/support/contact}" href="/support/contact"
                            class="text-slate-600 underline underline-offset-2">Contact IT support</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Password toggle script (unchanged) -->
  <script>
    function togglePassword() {
      const passwordInput = document.getElementById("password");
      const eyeOpen = document.getElementById("eyeOpen");
      const eyeClosed = document.getElementById("eyeClosed");
      const button = document.querySelector("[onclick='togglePassword()']");

      if (passwordInput.type === "password") {
        passwordInput.type = "text";
        eyeOpen.classList.add("hidden");
        eyeClosed.classList.remove("hidden");
        button.setAttribute("aria-label", "Hide password");
      } else {
        passwordInput.type = "password";
        eyeOpen.classList.remove("hidden");
        eyeClosed.classList.add("hidden");
        button.setAttribute("aria-label", "Show password");
      }
    }
  </script>
</body>
</html>
